{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\Jakov\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _toConsumableArray from \"C:\\\\Users\\\\Jakov\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\Jakov\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:\\\\Users\\\\Jakov\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\Jakov\\\\Invenio\\\\src\\\\components\\\\post.js\";\nimport React, { useState } from 'react';\n\nfunction Post(props) {\n  var _useState = useState(props.post.likedBy.includes(props.userProps.id)),\n      _useState2 = _slicedToArray(_useState, 2),\n      like = _useState2[0],\n      setLike = _useState2[1];\n\n  var _useState3 = useState(props.post.likes),\n      _useState4 = _slicedToArray(_useState3, 2),\n      likes = _useState4[0],\n      setLikes = _useState4[1];\n\n  var likeFunction =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return fetch('http://localhost:3000/posts/' + props.post.id, {\n                method: 'PATCH',\n                headers: {\n                  'Accept': 'application/json',\n                  'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                  likes: likes + 1,\n                  likedBy: [].concat(_toConsumableArray(props.post.likedBy), [props.userProps.id])\n                })\n              });\n\n            case 2:\n              setLike(!like);\n              setLikes(likes + 1);\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function likeFunction() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var dislikeFunction =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return fetch('http://localhost:3000/posts/' + props.post.id, {\n                method: 'PATCH',\n                headers: {\n                  'Accept': 'application/json',\n                  'Contet-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                  likes: likes - 1,\n                  likedBy: props.post.likedBy.filter(function (value, index, arr) {\n                    return value !== props.userProps.id;\n                  })\n                })\n              });\n\n            case 3:\n              _context2.next = 8;\n              break;\n\n            case 5:\n              _context2.prev = 5;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.log('ex:', _context2.t0);\n\n            case 8:\n              setLike(!like);\n              setLikes(likes - 1);\n\n            case 10:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 5]]);\n    }));\n\n    return function dislikeFunction() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return React.createElement(\"div\", {\n    className: \"post\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: props.post.picture,\n    alt: \"post-pic\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, props.post.userName), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, props.post.description), like ? React.createElement(\"span\", {\n    className: \"liked\",\n    onClick: dislikeFunction,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, likes) : React.createElement(\"span\", {\n    className: \"likes\",\n    onClick: likeFunction,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, likes), React.createElement(\"span\", {\n    className: \"comments\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, props.post.comments.length)));\n}\n\nexport default Post;","map":{"version":3,"sources":["C:\\Users\\Jakov\\Invenio\\src\\components\\post.js"],"names":["React","useState","Post","props","post","likedBy","includes","userProps","id","like","setLike","likes","setLikes","likeFunction","fetch","method","headers","body","JSON","stringify","dislikeFunction","filter","value","index","arr","console","log","picture","userName","description","comments","length"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\n\r\n\r\nfunction Post (props) {\r\n\r\n    const [like, setLike] = useState(props.post.likedBy.includes(props.userProps.id));\r\n    const [likes, setLikes] = useState(props.post.likes);\r\n\r\n    const likeFunction = async () => {\r\n        await fetch('http://localhost:3000/posts/'+props.post.id, {\r\n            method: 'PATCH',\r\n            headers: { \r\n                'Accept':'application/json',\r\n                'Content-Type':'application/json'\r\n            },\r\n            body: JSON.stringify({\r\n                likes: likes + 1,\r\n                likedBy: [...props.post.likedBy, props.userProps.id]\r\n            })\r\n        });\r\n\r\n        setLike(!like);\r\n        setLikes(likes+1);\r\n    }\r\n\r\n    const dislikeFunction = async () => {\r\n        try {\r\n            await fetch('http://localhost:3000/posts/'+props.post.id, {\r\n                method: 'PATCH',\r\n                headers: {\r\n                    'Accept': 'application/json',\r\n                    'Contet-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify({\r\n                    likes: likes - 1,\r\n                    likedBy: props.post.likedBy.filter((value, index, arr) => value !== props.userProps.id)\r\n                })\r\n            });\r\n        } catch(ex) {\r\n            console.log('ex:', ex);\r\n        }\r\n        setLike(!like);\r\n        setLikes(likes-1);\r\n    }\r\n\r\n    return (\r\n        <div className=\"post\">\r\n            <img src={props.post.picture} alt=\"post-pic\" />\r\n            <div>\r\n                <p>{props.post.userName}</p>\r\n                <p>{props.post.description}</p>\r\n                {like ? (\r\n                    <span className=\"liked\" onClick={dislikeFunction}>{likes}</span>\r\n                ) : (\r\n                    <span className=\"likes\" onClick={likeFunction}>{likes}</span>\r\n                )}\r\n                \r\n                <span className=\"comments\">{props.post.comments.length}</span>\r\n            </div>\r\n            \r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Post;"]},"metadata":{},"sourceType":"module"}