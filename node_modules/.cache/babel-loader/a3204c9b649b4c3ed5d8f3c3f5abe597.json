{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\Jakov\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\Jakov\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:\\\\Users\\\\Jakov\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\Jakov\\\\Invenio\\\\src\\\\components\\\\login.js\";\nimport React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport ReactModal from 'react-modal';\nimport { connect } from 'react-redux';\nimport '../App.scss';\nReactModal.setAppElement(document.getElementById('root'));\n\nfunction Login(props) {\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      email = _useState2[0],\n      setEmail = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      password = _useState4[0],\n      setPassword = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      showModal = _useState6[0],\n      setShowModal = _useState6[1];\n\n  var modalToggle = function modalToggle() {\n    setShowModal(!showModal);\n  };\n\n  var contentStyle = {\n    position: 'absolute',\n    left: '7vw',\n    textAlign: 'center',\n    right: '7vw',\n    width: '30vw',\n    margin: '0 auto',\n    border: 'none',\n    background: 'moccasin',\n    overflow: 'auto',\n    borderRadius: '4px',\n    bottom: 'unset',\n    outline: 'none',\n    padding: '35px'\n  };\n\n  var handleSubmit =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(e) {\n      var barbershops, customers;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              _context.next = 3;\n              return fetch('http://localhost:3000/barbershops');\n\n            case 3:\n              _context.next = 5;\n              return _context.sent.json();\n\n            case 5:\n              barbershops = _context.sent;\n              _context.next = 8;\n              return fetch('http://localhost:3000/customers');\n\n            case 8:\n              _context.next = 10;\n              return _context.sent.json();\n\n            case 10:\n              customers = _context.sent;\n\n              // console.log(customers);\n              // console.log(barbershops);\n              // console.log(password);\n              // checkUser(barbershops, email, password);\n              // console.log(checkUser(barbershops, email, password));\n              if (checkUser(barbershops, email, password) || checkUser(customers, email, password)) {\n                customers.map(function (customer) {\n                  if (customer.userName === email) {\n                    props.setUserData(customer);\n                  }\n\n                  return null;\n                });\n                props.history.replace('/app/home');\n              } else {\n                modalToggle();\n              }\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleSubmit(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return React.createElement(\"div\", {\n    className: \"App\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: require(\"../logo.png\"),\n    alt: \"invenio-logo\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, \"Prona\\u0111i najboljeg i najpovoljnijeg frizera u blizini.\"), React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"email\",\n    value: email,\n    onChange: function onChange(e) {\n      return setEmail(e.target.value);\n    },\n    placeholder: \"E-mail address\",\n    name: \"email\",\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    type: \"password\",\n    value: password,\n    onChange: function onChange(e) {\n      return setPassword(e.target.value);\n    },\n    placeholder: \"Password\",\n    name: \"password\",\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    type: \"submit\",\n    value: \"PRIJAVA\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  })), React.createElement(ReactModal, {\n    isOpen: showModal,\n    closeTimeoutMS: 200,\n    style: {\n      content: contentStyle\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, \"Please enter valid email and password.\"), React.createElement(\"button\", {\n    onClick: modalToggle,\n    className: \"modal-button\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }, \"OK\")), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, \"Izradi \", React.createElement(Link, {\n    to: \"/signup\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, \"Novi ra\\u010Dun\")), React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, \"Zaboravljena \", React.createElement(\"a\", {\n    href: \"#\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, \"lozinka\"), \"?\")));\n}\n\nfunction checkUser(arr, email, password) {\n  return arr.some(function (el) {\n    return el.userName === email && el.password === password;\n  });\n}\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    setUserData: function setUserData(userData) {\n      dispatch({\n        type: 'LOGIN',\n        user: userData\n      });\n    }\n  };\n};\n\nexport default connect(null, mapDispatchToProps)(Login);","map":{"version":3,"sources":["C:\\Users\\Jakov\\Invenio\\src\\components\\login.js"],"names":["React","useState","Link","ReactModal","connect","setAppElement","document","getElementById","Login","props","email","setEmail","password","setPassword","showModal","setShowModal","modalToggle","contentStyle","position","left","textAlign","right","width","margin","border","background","overflow","borderRadius","bottom","outline","padding","handleSubmit","e","preventDefault","fetch","json","barbershops","customers","checkUser","map","customer","userName","setUserData","history","replace","require","target","value","content","arr","some","el","mapDispatchToProps","dispatch","userData","type","user"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport ReactModal from 'react-modal';\r\nimport { connect } from 'react-redux';\r\n\r\nimport '../App.scss';\r\n\r\nReactModal.setAppElement(document.getElementById('root'));\r\n\r\nfunction Login(props)   {\r\n\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [showModal, setShowModal] = useState(false);\r\n\r\n  \r\n\r\n  const modalToggle = () => {\r\n    setShowModal(!showModal);\r\n  }\r\n\r\n  const contentStyle = {\r\n    position: 'absolute',\r\n    left: '7vw',\r\n    textAlign: 'center',\r\n    right: '7vw',\r\n    width: '30vw',\r\n    margin: '0 auto',\r\n    border: 'none',\r\n    background: 'moccasin',\r\n    overflow: 'auto',\r\n    borderRadius: '4px',\r\n    bottom: 'unset',\r\n    outline: 'none',\r\n    padding: '35px',\r\n  }\r\n\r\n  \r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const barbershops = await (await fetch('http://localhost:3000/barbershops')).json();\r\n    const customers = await (await fetch('http://localhost:3000/customers')).json();\r\n\r\n    // console.log(customers);\r\n    // console.log(barbershops);\r\n    // console.log(password);\r\n    // checkUser(barbershops, email, password);\r\n    \r\n    // console.log(checkUser(barbershops, email, password));\r\n    \r\n    if(checkUser(barbershops, email, password) || checkUser(customers, email, password)) {\r\n      customers.map(customer => {\r\n        if (customer.userName === email) {\r\n          props.setUserData(customer);\r\n        }\r\n        return null;\r\n      })\r\n      props.history.replace('/app/home');\r\n    } else {\r\n      modalToggle();\r\n    }\r\n\r\n  }\r\n    \r\n    return (\r\n      <div className=\"App\">\r\n        <img src={require(\"../logo.png\")} alt={\"invenio-logo\"} />\r\n        <p>Pronađi najboljeg i najpovoljnijeg frizera u blizini.</p>\r\n        <form onSubmit={handleSubmit}>\r\n          <input\r\n            type=\"email\"\r\n            value={email}\r\n            onChange={e => setEmail(e.target.value)}\r\n            placeholder=\"E-mail address\"\r\n            name=\"email\"\r\n            required\r\n          />\r\n          <input\r\n            type=\"password\"\r\n            value={password}\r\n            onChange={e => setPassword(e.target.value)}\r\n            placeholder=\"Password\"\r\n            name=\"password\"\r\n            required\r\n          />\r\n          <input type=\"submit\" value=\"PRIJAVA\" />\r\n        </form>\r\n        <ReactModal\r\n          isOpen={showModal}\r\n          closeTimeoutMS={200}\r\n          style={{content: contentStyle}}\r\n        >\r\n          <div>Please enter valid email and password.</div>\r\n          <button onClick={modalToggle} className=\"modal-button\">OK</button>\r\n        </ReactModal>\r\n        <div>\r\n          <span>\r\n            Izradi <Link to=\"/signup\">Novi račun</Link>\r\n          </span>\r\n          <span>\r\n            Zaboravljena <a href=\"#\">lozinka</a>?\r\n          </span>\r\n        </div>\r\n        \r\n      </div>\r\n      \r\n    );\r\n} \r\n\r\nfunction checkUser(arr, email, password) {\r\n  return arr.some(el => {\r\n    return el.userName === email && el.password === password\r\n  })\r\n}\r\n\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    setUserData: (userData) => {\r\n      dispatch({\r\n        type: 'LOGIN',\r\n        user: userData\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\nexport default connect(null ,mapDispatchToProps)(Login);"]},"metadata":{},"sourceType":"module"}